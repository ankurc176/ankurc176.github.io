<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Protected Page</title>
    <script src="https://www.gstatic.com/firebasejs/10.5.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.5.0/firebase-auth.js"></script>
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyCBO03ndv_spcBn38VoncvSCJFSOkNHOmg",
            authDomain: "protect-github.firebaseapp.com",
        };
        firebase.initializeApp(firebaseConfig);

        firebase.auth().onAuthStateChanged(user => {
            if (!user) {
                window.location.href = "login.html"; // Redirect to login page if not logged in
            } else {
                // User is authenticated, load Zendesk chat widget
                loadZendeskChat();
            }
        });

        function signOut() {
            firebase.auth().signOut().then(() => {
                window.location.href = "login.html"; // Redirect to login after logout
            });
        }

        function loadZendeskChat() {
            const script = document.createElement("script");
            script.id = "ze-snippet";
            script.src = "https://static.zdassets.com/ekr/snippet.js?key=897e95f0-0fab-4528-8b67-694a24d24c4c";
            document.body.appendChild(script);
        }
    </script>
</head>
<body style="background-color: white;">      
    <p> This is the Sandbox Test Page </p>

    <h1>Welcome to the Protected Page</h1>
    <p>Only logged-in users can see this.</p>
    <button onclick="signOut()">Logout</button>
</body>
</html>
